# MCGO 经济平衡性分析报告

## 1. 概述
本文档分析 MCGO 游戏中的经济系统平衡性，评估武器价格与玩家收入的关系，确保不同阶段玩家都能合理购买装备。

## 2. 玩家收入分析

### 2.1 手枪局（第1回合 & 换边后第1回合）
- **起始资金**: 800
- **特点**: 
  - 所有玩家起点相同
  - 只能购买基础装备
  - 为后续回合奠定经济基础

### 2.2 普通回合收入来源

#### 2.2.1 回合胜利奖励
- **胜利基础奖励**: 3250
- **适用条件**: 该回合获胜的队伍
- **累计效果**: 连胜可以快速积累资金

#### 2.2.2 回合失败奖励（含连败补偿）
- **失败基础奖励**: 1400
- **连败奖励**: 每连败一场 +500
- **连败奖励上限**: 3400
- **最大失败奖励**: 1400 + 3400 = 4800

**连败奖励阶梯**:
```
连败1场: 1400 + 500 = 1900
连败2场: 1400 + 1000 = 2400
连败3场: 1400 + 1500 = 2900
连败4场: 1400 + 2000 = 3400
连败5场: 1400 + 2500 = 3900
连败6场: 1400 + 3000 = 4400
连败7场及以上: 1400 + 3400 = 4800 (达到上限)
```

#### 2.2.3 击杀奖励
根据使用的武器类型，击杀敌人可获得额外奖励：

| 武器类型 | 奖励金额 | 说明 |
|---------|---------|------|
| 刀 (Knife) | 15 | 最高击杀奖励，鼓励近战击杀 |
| 冲锋枪 (SMG) | 6 | 鼓励使用冲锋枪 |
| 手枪 (Pistol) | 3 | 基础奖励 |
| 步枪 (Rifle) | 3 | 主力武器，平衡奖励 |
| 重型武器 (Heavy) | 3 | 霰弹枪等 |
| 投掷物 (Grenade) | 3 | 手雷击杀 |
| AWP | 1 | 最低奖励，平衡狙击枪强度 |

### 2.3 不同阶段玩家经济模拟

#### 新手玩家（连败场景）
假设玩家连续失败，没有击杀：
```
第1回合: 800 (手枪局)
第2回合: 800 + 1900 = 2700
第3回合: 2700 + 2400 = 5100
第4回合: 5100 + 2900 = 8000
第5回合: 8000 + 3400 = 11400
```

#### 中等水平玩家（胜负交替）
假设胜负交替，平均每回合1次击杀（步枪）：
```
第1回合: 800
第2回合胜利: 800 + 3250 + 3 = 4053
第3回合失败: 4053 + 1900 + 3 = 5956
第4回合胜利: 5956 + 3250 + 3 = 9209
```

#### 高水平玩家（连胜场景）
假设连续胜利，平均每回合2-3次击杀：
```
第1回合: 800
第2回合胜利: 800 + 3250 + 6 = 4056
第3回合胜利: 4056 + 3250 + 6 = 7312
第4回合胜利: 7312 + 3250 + 6 = 10568
第5回合胜利: 10568 + 3250 + 6 = 13824
```

## 3. 武器价格分析

### 3.1 当前价格表（从 WeaponPrices.java）

#### 手枪类 (2-7)
- Glock17: 2
- M9: 3
- Desert Eagle: 7

#### 冲锋枪类 (12-23)
- MP5: 14
- MP7: 15
- UMP45: 12
- P90: 23
- Vector: 22

#### 步枪类 (27-33)
- AK47: 27
- M4A1: 31
- AUG: 33
- SG553: 30

#### 狙击枪类 (47)
- L96A1 (AWP): 47

#### 护甲
- 轻型护甲: 3
- 重型护甲: 10

#### 投掷物
- 手雷: 3

### 3.2 价格区间合理性评估

**注意**: 当前价格采用了**缩减比例**（约为真实CSGO价格的1/100），这与收入系统相匹配。

#### ✅ 手枪局经济（800起始）
- 起始资金800可以购买：
  - 轻型护甲(3) + 手枪(2-7) + 多个手雷(3) = 合理
  - 重型护甲(10) + 手枪(2) = 可行但紧张
  - **评估**: 平衡良好，玩家有多种选择

#### ✅ 第二回合（ECO局或半起）
- 失败后资金约 800 + 1900 = 2700
  - 可购买：UMP45(12) + 重甲(10) + 手雷(3) = 25，剩余2675
  - 或：冲锋枪 + 轻甲 + 投掷物
  - **评估**: 合理，失败方有翻盘机会

#### ✅ 中期回合（经济回升）
- 连败3-4场后资金约 8000-11000
  - 可购买：AK47(27) + 重甲(10) + 手雷(3) = 40，剩余充足
  - 或：M4A1(31) + 重甲(10) + 多个投掷物
  - **评估**: 合理，经济恢复后可购买主力装备

#### ⚠️ 高端武器（AWP）
- AWP价格: 47
- 需要至少约 60 资金才能购买 AWP + 重甲 + 投掷物
- 连胜3-4回合后可达到（约10000+资金）
- **评估**: 偏高，但符合AWP的强力定位

## 4. 平衡性问题与建议

### 4.1 发现的问题

#### 问题1: 价格比例不一致
- **现象**: 武器价格使用了缩减比例（1/100），但收入系统似乎保持较高数值
- **影响**: 玩家资金快速累积，可能导致经济系统失效
- **证据**: 
  - 手枪局起始800，但手枪只需2-7
  - 连胜几回合后资金轻松过万，AWP(47)变得很便宜

#### 问题2: 击杀奖励与价格不匹配
- **现象**: 击杀奖励(1-15)相对于武器价格(2-47)很小
- **影响**: 击杀对经济影响微乎其微，回合胜负奖励主导经济
- **建议**: 需要决定是提高击杀奖励还是保持当前设计

### 4.2 调整建议

#### 建议A: 统一缩放所有数值（推荐）
将所有经济数值统一缩小到与武器价格匹配的规模：

```java
// 手枪局起始资金
pistolRoundStartingMoney: 800 -> 8

// 胜利奖励
winReward: 3250 -> 32

// 失败奖励
lossReward: 1400 -> 14
lossStreakBonus: 500 -> 5
maxLossStreakBonus: 3400 -> 34

// 击杀奖励可以保持不变或略微调整
killRewardKnife: 15 -> 15 (不变)
killRewardSmg: 6 -> 6 (不变)
killRewardPistol: 3 -> 3 (不变)
killRewardRifle: 3 -> 3 (不变)
killRewardAwp: 1 -> 1 (不变)
```

**优点**:
- 使经济系统更紧张，每个购买决策更重要
- 击杀奖励的价值相对提升
- 与真实CSGO的经济压力更接近

**缺点**:
- 需要更新现有配置和存档
- 玩家需要适应新的数值

#### 建议B: 提高武器价格（次选）
保持收入不变，提高所有武器价格约100倍：

```
手枪: 200-700
冲锋枪: 1200-2300  
步枪: 2700-3300
AWP: 4700
护甲: 300-1000
```

**优点**:
- 不需要改动收入配置
- 与真实CSGO价格更接近

**缺点**:
- WeaponPrices.java中已经定义了真实价格映射
- 当前代码中同时存在两套价格系统，容易混淆

#### 建议C: 保持现状但调整货币上限
如果不想大改，可以：
1. 降低虚拟货币上限（当前65535 -> 10000）
2. 增加"奢侈税"机制：持有过多资金时每回合扣除一定比例

### 4.3 最终建议

**推荐采用建议A（统一缩放）**，原因：

1. **一致性**: 代码中已经在使用缩减后的价格，应该让收入也匹配
2. **游戏性**: 更紧张的经济让每个决策更有意义
3. **维护性**: 所有数值在同一量级，更容易平衡和调整
4. **扩展性**: 未来添加新武器或装备时，定价更直观

### 4.4 具体实施步骤

1. 更新 `ServerConfig.java` 中的默认值
2. 创建数据库迁移脚本（如果有持久化存储）
3. 更新游戏内提示文本
4. 进行充分测试，特别是：
   - 手枪局是否能购买基础装备
   - 连败方是否能在3-4回合后购买主力武器
   - 连胜方是否能在5-6回合后购买AWP
5. 根据测试结果微调数值

## 5. 换边资金清空规则说明

已实现的四种策略：

### RESET_TO_PISTOL_ROUND（推荐，默认）
- **规则**: 重置为手枪局起始资金
- **优点**: 公平，双方在换边后重新开始
- **适用**: 竞技模式

### CLEAR_ALL
- **规则**: 清空所有资金
- **优点**: 最严格，强制双方重新积累
- **适用**: 特殊比赛模式

### CLEAR_TEMPORARY_ONLY
- **规则**: 保留基础资金，清空超出部分
- **优点**: 给予一定经济延续性
- **适用**: 休闲模式

### KEEP_ALL
- **规则**: 保留所有资金
- **优点**: 经济延续性最强
- **适用**: 测试或特殊玩法

## 6. 结论

当前经济系统的主要问题是**收入与价格的比例失衡**。建议：

1. ✅ **立即实施**: 采用建议A，统一缩放所有收入数值
2. ✅ **已完成**: 换边资金清空机制通过事件系统解耦
3. ⏳ **待优化**: 根据实际游戏测试调整具体数值
4. ⏳ **长期**: 考虑添加更多经济机制（如拆包奖励、助攻奖励等）

---

**文档版本**: 1.0  
**最后更新**: 2024年（代码生成时间）  
**维护者**: MCGO开发团队
